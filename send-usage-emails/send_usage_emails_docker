FROM python:3.9-slim
WORKDIR /src

RUN apt-get update \
    && apk add --no-cache python3 py3-pip postgresql-libs \
    && apt-get install gcc python3-dev musl-dev gfortran postgresql-dev build-base py3-numpy -y \
    && apt-get clean

COPY ["requirements.txt", "./requirements.txt"]
RUN pip install -r requirements.txt

COPY ["*", "./"]
ENTRYPOINT ["python3", "send_usage_emails.py"]
