---
title: "README for SFP Enhanced Reports"
author: "Heather Hay"
date: "November 9, 2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Installing R and R Studio
>
You need to install these programs from the Software Center. First install R, then Rstudio.  
* **R for Windows 4.0.3**  
* **RStudioDesktop 1.2.5019 Gen P0**  

>
Alternatively, you can install the latest versions from Chocolately running CMD as admin.  
* *choco install choco install r -y*  
* *choco install r.studio -y*  

>
The chocolatey documentation is here:  
* [R](https://community.chocolatey.org/packages/R.Project#install)  
* [R Studio]([https://community.chocolatey.org/packages/R.Studio#install)  


### Setting up Your Folder Hierarchy for R
> This is how I set up my scripting folders for R. If yours are different, you may need to adjust your *here()* function to reflect that in the scripts.  
>
**RStudio_Heather**   (*This is my working directory and I also keep my .Proj files here*)      
* figure  
* output  
* scripts  
* source  


### Setting Working Directory in R Studio
> Go to *Tools > Global Options > General*  
* Leave the R version as "Default"  
* Set Default Working Directory (when not in a project) to your preferred location  
* Un-check Restore .RData into workspace at startup  
* Set Save workspace to .RData on exit to "Never"


### Setting Dark Mode in R Studio
> You can set RStudio to a variety of dark modes by going to *Tools > Global Options > Appearance* and changing the Editor theme. I use "Pastel on Dark", but pick what works best for you.


### Installing Library Packages
> To use the packages in your script's library call, they must first be installed.
In RStudio, you can go to the Packages tab on the right, select Install, type in the name of the package and press Install. Alternatively, you can enter *install.packages(package_name)* into the console. You might also see a popup message at the top of your script that says dependancies are not installed. If you select Install, all the required packages will be downloaded.


### Reference Material
> 
[R For Data Science](https://r4ds.had.co.nz/)  
[Using Projects](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects)  
[CRAN Packages](https://cran.r-project.org/web/packages/available_packages_by_name.html)


### Running in VS Code 
> If you choose to run this script in VS Code instead of RStudio, you will need to install *R Extension for Visual Studio Code* by Yuki Ueda.
>
You'll also want to set the system environment in VS Code with this line:
**Sys.setenv(RSTUDIO_PANDOC="C:/Program Files/RStudio/bin/pandoc")**  
You can find the correct directory by typing *Sys.getenv("RSTUDIO_PANDOC")* into the console


### Running an SFP Enhanced Report on a Share vs. a Folder or Sub-Folder
> The script's filter function will differ depending on what information you're pulling out, as will the function to calculate folder depth. The examples provided are snippets of the full code.


**Share Example**      
```{r}
#search_share <- sfp_enhanced %>%    
  #filter(share == "S63072")
```
```{r}
# Subtract 4 because the folder depth count starts after \\SERVER\SHARE\    
  #table_pathsize_tallyfiles$folderdepth <- table_pathsize_tallyfiles$folderdepth - 4    
```


**Folder Example**    
```{r}
#search_folder <- sfp_enhanced %>%    
  #filter(str_detect(path, "^\\\\\\\\SLEDGE\\\\S40203\\\\IRMT"))
```
```{r}
# Subtract 5 because the folder depth count starts after \\SERVER\SHARE\ROOT FOLDER\  
  #table_pathsize_tallyfiles$folderdepth <- table_pathsize_tallyfiles$folderdepth - 5  
```


**Sub-Folder Example**  
```{r}
#search_folder <- sfp_enhanced %>%  
  #filter(str_detect(path, "^\\\\\\\\SLEDGE\\\\S40203\\\\IRMT\\\\FOI"))
```
```{r}
# Subtract 6 because the folder depth count starts after \\SERVER\SHARE\ROOT FOLDER\SUB-FOLDER\   
  #table_pathsize_tallyfiles$folderdepth <- table_pathsize_tallyfiles$folderdepth - 6
```

> One "gotcha" to look out for is when folder names are similar, but you only want to pull information from one of them (i.e. a filter on "ROB" might get you "ROB", "ROB FOI", "ROBERTSON CREEK" ). In this case, you want to also apply a *boundary* to the filter.

**Sub-Folder search with Boundary Example**
```{r}
#search_folder <- sfp_enhanced %>%
  #filter(str_detect(path, "^\\\\\\\\GRADER\\\\S40086\\\\WANSHARE\\\\ROB")) %>%
  #filter(str_detect(path,"\\bROB\\b"))
```

### Preferences
> I prefer to create new R files with R Markdown (.Rmd) because it allows me to write code in "chunks". This way, I can run my chunks as I go along to make sure I'm getting the desired outcome, without having to write the whole script at once. 